packages/api/src/research_kb_api/routes/concepts.py:108: error: Argument "relationship_type" to "RelationshipDetail" has incompatible type "RelationshipType | None"; expected "RelationshipType"  [arg-type]
packages/api/src/research_kb_api/service.py:385: error: Argument "source_type" to "list_all" of "SourceStore" has incompatible type "str | None"; expected "SourceType | None"  [arg-type]
packages/api/src/research_kb_api/service.py:580: error: "dict[Any, Any]" has no attribute "id"  [attr-defined]
packages/api/src/research_kb_api/service.py:580: error: "dict[Any, Any]" has no attribute "title"  [attr-defined]
packages/api/src/research_kb_api/service.py:580: error: "dict[Any, Any]" has no attribute "year"  [attr-defined]
packages/api/src/research_kb_api/service.py:581: error: "dict[Any, Any]" has no attribute "id"  [attr-defined]
packages/api/src/research_kb_api/service.py:581: error: "dict[Any, Any]" has no attribute "title"  [attr-defined]
packages/api/src/research_kb_api/service.py:581: error: "dict[Any, Any]" has no attribute "year"  [attr-defined]
packages/common/src/research_kb_common/logging_config.py:63: error: Argument "processors" to "configure" has incompatible type "list[object]"; expected "Iterable[Callable[[Any, str, MutableMapping[str, Any]], Mapping[str, Any] | str | bytes | bytearray | tuple[Any, ...]]] | None"  [arg-type]
packages/common/src/research_kb_common/logging_config.py:84: error: Returning Any from function declared to return "BoundLogger"  [no-any-return]
packages/daemon/src/research_kb_daemon/handler.py:38: error: Function is missing a return type annotation  [no-untyped-def]
packages/daemon/src/research_kb_daemon/handler.py:423: error: Incompatible types in assignment (expression has type "dict[str, str | float | None]", target has type "str | None")  [assignment]
packages/daemon/src/research_kb_daemon/pool.py:124: error: Returning Any from function declared to return "dict[Any, Any]"  [no-any-return]
packages/daemon/src/research_kb_daemon/pool.py:217: error: Returning Any from function declared to return "list[float]"  [no-any-return]
packages/daemon/src/research_kb_daemon/pool.py:318: error: Returning Any from function declared to return "dict[Any, Any]"  [no-any-return]
packages/daemon/src/research_kb_daemon/pool.py:45: error: Function is missing a return type annotation  [no-untyped-def]
packages/daemon/src/research_kb_daemon/server.py:177: error: Item "None" of "Semaphore | None" has no attribute "acquire"  [union-attr]
packages/daemon/src/research_kb_daemon/server.py:220: error: Item "None" of "Semaphore | None" has no attribute "release"  [union-attr]
packages/daemon/src/research_kb_daemon/server.py:281: error: Function is missing a return type annotation  [no-untyped-def]
packages/daemon/src/research_kb_daemon/server.py:281: note: Use "-> None" if function does not return a value
packages/daemon/src/research_kb_daemon/server.py:75: error: Incompatible types in assignment (expression has type "dict[Any, Any]", target has type "int | str | None")  [assignment]
packages/daemon/src/research_kb_daemon/warmup.py:105: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/daemon/src/research_kb_daemon/warmup.py:113: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/daemon/src/research_kb_daemon/warmup.py:123: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/dashboard/src/research_kb_dashboard/api_client.py:51: error: Argument "base_url" to "AsyncClient" has incompatible type "str | None"; expected "URL | str"  [arg-type]
packages/extraction/src/research_kb_extraction/anthropic_client.py:205: error: No overload variant of "create" of "Messages" matches argument types "str", "int", "float", "str", "list[dict[str, str]]", "list[dict[str, Collection[str]]]", "dict[str, str]"  [call-overload]
packages/extraction/src/research_kb_extraction/anthropic_client.py:205: note:     def create(self, *, max_tokens: int, messages: Iterable[MessageParam], model: Literal['claude-opus-4-5-20251101', 'claude-opus-4-5', 'claude-3-7-sonnet-latest', 'claude-3-7-sonnet-20250219', 'claude-3-5-haiku-latest', 'claude-3-5-haiku-20241022', 'claude-haiku-4-5', 'claude-haiku-4-5-20251001', 'claude-sonnet-4-20250514', 'claude-sonnet-4-0', 'claude-4-sonnet-20250514', 'claude-sonnet-4-5', 'claude-sonnet-4-5-20250929', 'claude-opus-4-0', 'claude-opus-4-20250514', 'claude-4-opus-20250514', 'claude-opus-4-1-20250805', 'claude-3-opus-latest', 'claude-3-opus-20240229', 'claude-3-haiku-20240307'] | str, metadata: MetadataParam | Omit = ..., service_tier: Literal['auto', 'standard_only'] | Omit = ..., stop_sequences: SequenceNotStr[str] | Omit = ..., stream: Literal[False] | Omit = ..., system: str | Iterable[TextBlockParam] | Omit = ..., temperature: float | Omit = ..., thinking: ThinkingConfigEnabledParam | ThinkingConfigDisabledParam | Omit = ..., tool_choice: ToolChoiceAutoParam | ToolChoiceAnyParam | ToolChoiceToolParam | ToolChoiceNoneParam | Omit = ..., tools: Iterable[ToolParam | ToolBash20250124Param | ToolTextEditor20250124Param | ToolTextEditor20250429Param | ToolTextEditor20250728Param | WebSearchTool20250305Param] | Omit = ..., top_k: int | Omit = ..., top_p: float | Omit = ..., extra_headers: Mapping[str, str | Omit] | None = ..., extra_query: Mapping[str, object] | None = ..., extra_body: object | None = ..., timeout: float | Timeout | NotGiven | None = ...) -> Message
packages/extraction/src/research_kb_extraction/anthropic_client.py:205: note:     def create(self, *, max_tokens: int, messages: Iterable[MessageParam], model: Literal['claude-opus-4-5-20251101', 'claude-opus-4-5', 'claude-3-7-sonnet-latest', 'claude-3-7-sonnet-20250219', 'claude-3-5-haiku-latest', 'claude-3-5-haiku-20241022', 'claude-haiku-4-5', 'claude-haiku-4-5-20251001', 'claude-sonnet-4-20250514', 'claude-sonnet-4-0', 'claude-4-sonnet-20250514', 'claude-sonnet-4-5', 'claude-sonnet-4-5-20250929', 'claude-opus-4-0', 'claude-opus-4-20250514', 'claude-4-opus-20250514', 'claude-opus-4-1-20250805', 'claude-3-opus-latest', 'claude-3-opus-20240229', 'claude-3-haiku-20240307'] | str, stream: Literal[True], metadata: MetadataParam | Omit = ..., service_tier: Literal['auto', 'standard_only'] | Omit = ..., stop_sequences: SequenceNotStr[str] | Omit = ..., system: str | Iterable[TextBlockParam] | Omit = ..., temperature: float | Omit = ..., thinking: ThinkingConfigEnabledParam | ThinkingConfigDisabledParam | Omit = ..., tool_choice: ToolChoiceAutoParam | ToolChoiceAnyParam | ToolChoiceToolParam | ToolChoiceNoneParam | Omit = ..., tools: Iterable[ToolParam | ToolBash20250124Param | ToolTextEditor20250124Param | ToolTextEditor20250429Param | ToolTextEditor20250728Param | WebSearchTool20250305Param] | Omit = ..., top_k: int | Omit = ..., top_p: float | Omit = ..., extra_headers: Mapping[str, str | Omit] | None = ..., extra_query: Mapping[str, object] | None = ..., extra_body: object | None = ..., timeout: float | Timeout | NotGiven | None = ...) -> Stream[RawMessageStartEvent | RawMessageDeltaEvent | RawMessageStopEvent | RawContentBlockStartEvent | RawContentBlockDeltaEvent | RawContentBlockStopEvent]
packages/extraction/src/research_kb_extraction/anthropic_client.py:205: note:     def create(self, *, max_tokens: int, messages: Iterable[MessageParam], model: Literal['claude-opus-4-5-20251101', 'claude-opus-4-5', 'claude-3-7-sonnet-latest', 'claude-3-7-sonnet-20250219', 'claude-3-5-haiku-latest', 'claude-3-5-haiku-20241022', 'claude-haiku-4-5', 'claude-haiku-4-5-20251001', 'claude-sonnet-4-20250514', 'claude-sonnet-4-0', 'claude-4-sonnet-20250514', 'claude-sonnet-4-5', 'claude-sonnet-4-5-20250929', 'claude-opus-4-0', 'claude-opus-4-20250514', 'claude-4-opus-20250514', 'claude-opus-4-1-20250805', 'claude-3-opus-latest', 'claude-3-opus-20240229', 'claude-3-haiku-20240307'] | str, stream: bool, metadata: MetadataParam | Omit = ..., service_tier: Literal['auto', 'standard_only'] | Omit = ..., stop_sequences: SequenceNotStr[str] | Omit = ..., system: str | Iterable[TextBlockParam] | Omit = ..., temperature: float | Omit = ..., thinking: ThinkingConfigEnabledParam | ThinkingConfigDisabledParam | Omit = ..., tool_choice: ToolChoiceAutoParam | ToolChoiceAnyParam | ToolChoiceToolParam | ToolChoiceNoneParam | Omit = ..., tools: Iterable[ToolParam | ToolBash20250124Param | ToolTextEditor20250124Param | ToolTextEditor20250429Param | ToolTextEditor20250728Param | WebSearchTool20250305Param] | Omit = ..., top_k: int | Omit = ..., top_p: float | Omit = ..., extra_headers: Mapping[str, str | Omit] | None = ..., extra_query: Mapping[str, object] | None = ..., extra_body: object | None = ..., timeout: float | Timeout | NotGiven | None = ...) -> Message | Stream[RawMessageStartEvent | RawMessageDeltaEvent | RawMessageStopEvent | RawContentBlockStartEvent | RawContentBlockDeltaEvent | RawContentBlockStopEvent]
packages/extraction/src/research_kb_extraction/anthropic_client.py:205: note: Possible overload variants:
packages/extraction/src/research_kb_extraction/base_client.py:75: error: Function "builtins.callable" is not valid as a type  [valid-type]
packages/extraction/src/research_kb_extraction/base_client.py:75: note: Perhaps you meant "typing.Callable" instead of "callable"?
packages/extraction/src/research_kb_extraction/base_client.py:99: error: callable? not callable  [misc]
packages/extraction/src/research_kb_extraction/batch_client.py:187: error: Argument "requests" to "create" of "Batches" has incompatible type "list[dict[Any, Any]]"; expected "Iterable[Request]"  [arg-type]
packages/extraction/src/research_kb_extraction/batch_client.py:222: error: Function "builtins.callable" is not valid as a type  [valid-type]
packages/extraction/src/research_kb_extraction/batch_client.py:222: note: Perhaps you meant "typing.Callable" instead of "callable"?
packages/extraction/src/research_kb_extraction/batch_client.py:240: error: callable? not callable  [misc]
packages/extraction/src/research_kb_extraction/chunk_filter.py:243: error: Need type annotation for "by_reason" (hint: "by_reason: dict[<type>, <type>] = ...")  [var-annotated]
packages/extraction/src/research_kb_extraction/deduplicator.py:288: error: "object" has no attribute "embed"  [attr-defined]
packages/extraction/src/research_kb_extraction/deduplicator.py:289: error: "object" has no attribute "embed"  [attr-defined]
packages/extraction/src/research_kb_extraction/llama_cpp_client.py:236: error: "None" has no attribute "create_chat_completion"  [attr-defined]
packages/extraction/src/research_kb_extraction/llama_cpp_client.py:246: error: "None" has no attribute "create_chat_completion"  [attr-defined]
packages/extraction/src/research_kb_extraction/ollama_client.py:218: error: Function "builtins.callable" is not valid as a type  [valid-type]
packages/extraction/src/research_kb_extraction/ollama_client.py:218: note: Perhaps you meant "typing.Callable" instead of "callable"?
packages/extraction/src/research_kb_extraction/ollama_client.py:239: error: callable? not callable  [misc]
packages/mcp-server/src/research_kb_mcp/formatters.py:306: error: "ConceptRelationship" has no attribute "target_id"  [attr-defined]
packages/mcp-server/src/research_kb_mcp/tools/graph.py:184: error: "type[ConceptStore]" has no attribute "search_by_name"  [attr-defined]
packages/mcp-server/src/research_kb_mcp/tools/graph.py:217: error: Unexpected keyword argument "domain_id" for "find_similar" of "ConceptStore"  [call-arg]
packages/pdf-tools/src/research_kb_pdf/bibtex_generator.py:129: error: Argument 1 to "escape_bibtex" has incompatible type "str | None"; expected "str"  [arg-type]
packages/pdf-tools/src/research_kb_pdf/chunker.py:141: error: Need type annotation for "current_chunk" (hint: "current_chunk: list[<type>] = ...")  [var-annotated]
packages/pdf-tools/src/research_kb_pdf/chunker.py:266: error: Need type annotation for "overlap" (hint: "overlap: list[<type>] = ...")  [var-annotated]
packages/pdf-tools/src/research_kb_pdf/chunker.py:388: error: Need type annotation for "current" (hint: "current: list[<type>] = ...")  [var-annotated]
packages/pdf-tools/src/research_kb_pdf/chunker.py:76: error: Incompatible types in assignment (expression has type "None", variable has type "dict[Any, Any]")  [assignment]
packages/pdf-tools/src/research_kb_pdf/chunker.py:98: error: "AutoTokenizer" has no attribute "encode"  [attr-defined]
packages/pdf-tools/src/research_kb_pdf/dispatcher.py:195: error: Function "ChunkStore" could always be true in boolean context  [truthy-function]
packages/pdf-tools/src/research_kb_pdf/dlq.py:159: error: Need type annotation for "entries" (hint: "entries: list[<type>] = ...")  [var-annotated]
packages/pdf-tools/src/research_kb_pdf/dlq.py:44: error: Incompatible types in assignment (expression has type "None", variable has type "dict[Any, Any]")  [assignment]
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:11: error: Library stubs not installed for "requests"  [import-untyped]
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:11: note: (or run "mypy --install-types" to install all missing stub packages)
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:11: note: Hint: "python3 -m pip install types-requests"
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:11: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:438: error: Missing named argument "bibtex" for "Citation"  [call-arg]
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:438: error: Missing named argument "confidence_score" for "Citation"  [call-arg]
packages/pdf-tools/src/research_kb_pdf/grobid_client.py:438: error: Missing named argument "extraction_method" for "Citation"  [call-arg]
packages/pdf-tools/src/research_kb_pdf/rerank_client.py:201: error: Function "builtins.callable" is not valid as a type  [valid-type]
packages/pdf-tools/src/research_kb_pdf/rerank_client.py:201: note: Perhaps you meant "typing.Callable" instead of "callable"?
packages/storage/src/research_kb_storage/assumption_audit.py:613: error: Item "RedactedThinkingBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/assumption_audit.py:613: error: Item "ServerToolUseBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/assumption_audit.py:613: error: Item "ThinkingBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/assumption_audit.py:613: error: Item "ToolUseBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/assumption_audit.py:613: error: Item "WebSearchToolResultBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/assumption_store.py:231: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/assumption_store.py:236: error: Argument 1 to "append" of "list" has incompatible type "bool"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/assumption_store.py:241: error: Argument 1 to "append" of "list" has incompatible type "list[str]"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/assumption_store.py:246: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/assumption_store.py:320: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/assumption_store.py:388: error: Returning Any from function declared to return "int"  [no-any-return]
packages/storage/src/research_kb_storage/chunk_concept_store.py:213: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/chunk_store.py:430: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/chunk_store.py:455: error: Returning Any from function declared to return "int"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:106: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:133: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:142: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:159: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:172: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:228: error: Unsupported operand types for + ("object" and "int")  [operator]
packages/storage/src/research_kb_storage/citation_graph.py:232: error: Missing named argument "bibtex" for "Citation"  [call-arg]
packages/storage/src/research_kb_storage/citation_graph.py:232: error: Missing named argument "confidence_score" for "Citation"  [call-arg]
packages/storage/src/research_kb_storage/citation_graph.py:232: error: Missing named argument "context" for "Citation"  [call-arg]
packages/storage/src/research_kb_storage/citation_graph.py:232: error: Missing named argument "extraction_method" for "Citation"  [call-arg]
packages/storage/src/research_kb_storage/citation_graph.py:273: error: Unsupported operand types for + ("object" and "int")  [operator]
packages/storage/src/research_kb_storage/citation_graph.py:283: error: "object" has no attribute "get"  [attr-defined]
packages/storage/src/research_kb_storage/citation_graph.py:283: error: Unsupported target for indexed assignment ("object")  [index]
packages/storage/src/research_kb_storage/citation_graph.py:285: error: Unsupported operand types for + ("object" and "int")  [operator]
packages/storage/src/research_kb_storage/citation_graph.py:288: error: Unsupported operand types for + ("object" and "int")  [operator]
packages/storage/src/research_kb_storage/citation_graph.py:295: error: Unsupported operand types for % ("object" and "int")  [operator]
packages/storage/src/research_kb_storage/citation_graph.py:362: error: Need type annotation for "incoming"  [var-annotated]
packages/storage/src/research_kb_storage/citation_graph.py:460: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/citation_graph.py:470: error: Argument 1 to "append" of "list" has incompatible type "int"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/citation_graph.py:525: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/citation_graph.py:534: error: Argument 1 to "append" of "list" has incompatible type "int"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/citation_graph.py:64: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_graph.py:669: error: Argument 1 to "append" of "list" has incompatible type "int"; expected "str"  [arg-type]
packages/storage/src/research_kb_storage/citation_graph.py:77: error: Returning Any from function declared to return "UUID | None"  [no-any-return]
packages/storage/src/research_kb_storage/citation_store.py:238: error: Returning Any from function declared to return "int"  [no-any-return]
packages/storage/src/research_kb_storage/citation_store.py:355: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/concept_store.py:217: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/concept_store.py:222: error: Argument 1 to "append" of "list" has incompatible type "list[float]"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/concept_store.py:227: error: Argument 1 to "append" of "list" has incompatible type "bool"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/concept_store.py:232: error: Argument 1 to "append" of "list" has incompatible type "dict[Any, Any]"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/concept_store.py:237: error: Incompatible return value type (got "Concept | None", expected "Concept")  [return-value]
packages/storage/src/research_kb_storage/concept_store.py:279: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/concept_store.py:559: note: "find_similar" of "ConceptStore" defined here
packages/storage/src/research_kb_storage/connection.py:185: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/cross_domain.py:256: error: Returning Any from function declared to return "UUID"  [no-any-return]
packages/storage/src/research_kb_storage/discovery_store.py:116: error: Returning Any from function declared to return "UUID"  [no-any-return]
packages/storage/src/research_kb_storage/graph_queries.py:304: error: Argument 1 to "append" of "list" has incompatible type "tuple[Concept, ConceptRelationship | None]"; expected "tuple[Concept, None]"  [arg-type]
packages/storage/src/research_kb_storage/graph_queries.py:306: error: Incompatible return value type (got "list[tuple[Concept, None]]", expected "list[tuple[Concept, ConceptRelationship | None]] | None")  [return-value]
packages/storage/src/research_kb_storage/graph_queries.py:559: error: Returning Any from function declared to return "int | None"  [no-any-return]
packages/storage/src/research_kb_storage/graph_queries.py:630: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "list[Any]"  [arg-type]
packages/storage/src/research_kb_storage/graph_queries.py:636: error: Dict entry 0 has incompatible type "str": "Concept"; expected "str": "list[Any]"  [dict-item]
packages/storage/src/research_kb_storage/graph_queries.py:749: error: Argument 1 to "append" of "list" has incompatible type "str"; expected "list[Any]"  [arg-type]
packages/storage/src/research_kb_storage/graph_queries.py:755: error: Dict entry 0 has incompatible type "str": "Concept"; expected "str": "list[Any]"  [dict-item]
packages/storage/src/research_kb_storage/graph_queries.py:87: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:117: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:208: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:275: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:335: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:359: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:406: error: Need type annotation for "all_chunk_ids" (hint: "all_chunk_ids: set[<type>] = ...")  [var-annotated]
packages/storage/src/research_kb_storage/kuzu_store.py:433: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:528: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:599: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:629: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:635: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/kuzu_store.py:646: error: Item "list[QueryResult]" of "QueryResult | list[QueryResult]" has no attribute "get_as_df"  [union-attr]
packages/storage/src/research_kb_storage/method_store.py:221: error: Argument 1 to "append" of "list" has incompatible type "list[str]"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/method_store.py:226: error: Argument 1 to "append" of "list" has incompatible type "list[str]"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/method_store.py:231: error: Argument 1 to "append" of "list" has incompatible type "list[str]"; expected "UUID"  [arg-type]
packages/storage/src/research_kb_storage/method_store.py:236: error: Incompatible return value type (got "Method | None", expected "Method")  [return-value]
packages/storage/src/research_kb_storage/method_store.py:301: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/method_store.py:368: error: Returning Any from function declared to return "int"  [no-any-return]
packages/storage/src/research_kb_storage/query_expander.py:116: error: Need type annotation for "synonym_map" (hint: "synonym_map: dict[<type>, <type>] = ...")  [var-annotated]
packages/storage/src/research_kb_storage/query_expander.py:22: error: Library stubs not installed for "yaml"  [import-untyped]
packages/storage/src/research_kb_storage/query_expander.py:22: note: (or run "mypy --install-types" to install all missing stub packages)
packages/storage/src/research_kb_storage/query_expander.py:22: note: Hint: "python3 -m pip install types-PyYAML"
packages/storage/src/research_kb_storage/query_expander.py:22: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
packages/storage/src/research_kb_storage/query_expander.py:678: error: Item "RedactedThinkingBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/query_expander.py:678: error: Item "ServerToolUseBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/query_expander.py:678: error: Item "ThinkingBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/query_expander.py:678: error: Item "ToolUseBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/query_expander.py:678: error: Item "WebSearchToolResultBlock" of "TextBlock | ThinkingBlock | RedactedThinkingBlock | ToolUseBlock | ServerToolUseBlock | WebSearchToolResultBlock" has no attribute "text"  [union-attr]
packages/storage/src/research_kb_storage/query_extractor.py:60: error: Need type annotation for "matched_concept_ids" (hint: "matched_concept_ids: list[<type>] = ...")  [var-annotated]
packages/storage/src/research_kb_storage/queue_store.py:124: error: Returning Any from function declared to return "UUID"  [no-any-return]
packages/storage/src/research_kb_storage/relationship_store.py:329: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/search.py:1115: error: Missing named argument "domain_id" for "Chunk"  [call-arg]
packages/storage/src/research_kb_storage/search.py:1129: error: Missing named argument "domain_id" for "Source"  [call-arg]
packages/storage/src/research_kb_storage/search.py:1160: error: Missing named argument "citation_score" for "SearchResult"  [call-arg]
packages/storage/src/research_kb_storage/search.py:1160: error: Missing named argument "graph_score" for "SearchResult"  [call-arg]
packages/storage/src/research_kb_storage/search.py:1160: error: Missing named argument "rerank_score" for "SearchResult"  [call-arg]
packages/storage/src/research_kb_storage/search.py:171: error: Need type annotation for "chunk_scores"  [var-annotated]
packages/storage/src/research_kb_storage/search.py:184: error: Need type annotation for "rankings"  [var-annotated]
packages/storage/src/research_kb_storage/search.py:193: error: Argument "key" to "sort" of "list" has incompatible type "Callable[[tuple[Any, Any | None]], Any | None]"; expected "Callable[[tuple[Any, Any | None]], SupportsDunderLT[Any] | SupportsDunderGT[Any]]"  [arg-type]
packages/storage/src/research_kb_storage/search.py:193: error: Incompatible return value type (got "Any | None", expected "SupportsDunderLT[Any] | SupportsDunderGT[Any]")  [return-value]
packages/storage/src/research_kb_storage/search.py:641: error: Argument "query" to "rerank_search_results" of "RerankClient" has incompatible type "str | None"; expected "str"  [arg-type]
packages/storage/src/research_kb_storage/source_store.py:467: error: Returning Any from function declared to return "bool"  [no-any-return]
packages/storage/src/research_kb_storage/source_store.py:521: error: List item 0 has incompatible type "int"; expected "str"  [list-item]
packages/storage/src/research_kb_storage/source_store.py:521: error: List item 1 has incompatible type "int"; expected "str"  [list-item]
